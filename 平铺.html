<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const data = [
        {
          title: "parent 1",
          key: "0-0",
          children: [
            {
              title: "parent 1-0",
              key: "0-0-0",
              disabled: true,
              children: [
                {
                  title: "leaf",
                  key: "0-0-0-0",
                  disableCheckbox: true,
                },
                {
                  title: "leaf",
                  key: "0-0-0-1",
                },
              ],
            },
            {
              title: "parent 1-1",
              key: "0-0-1",
              children: [
                {
                  title: 111,
                  key: "0-0-1-0",
                },
              ],
            },
          ],
        },
      ];
      function toFlat(data) {
        let arr = [];
        data.forEach((ele) => {
          if (ele.children) {
            arr.push(ele);
            arr.push(...toFlat(ele.children));
          } else {
            arr.push(ele);
          }
        });
        return arr;
      }
      const res = toFlat(data);
      console.log("res: ", res);

      const dataArray = [1, 2, [3, 4, 5, [6, 7, 8], 9], 10, [11, 12]];
      function toFalttion(dataArray) {
        let resArray = [];
        dataArray.forEach((ele) => {
          if (Array.isArray(ele)) {
            resArray.push(...toFalttion(ele));
          } else {
            resArray.push(ele);
          }
        });
        return resArray;
      }
      const res1 = toFalttion(dataArray);
      console.log("res: ", res1);
      const faltData = [
        { id: "01", name: "张大大", pid: "", job: "项目经理" },
        { id: "02", name: "小亮", pid: "01", job: "产品leader" },
        { id: "03", name: "小美", pid: "01", job: "UIleader" },
        { id: "04", name: "老马", pid: "01", job: "技术leader" },
        { id: "05", name: "老王", pid: "01", job: "测试leader" },
        { id: "06", name: "老李", pid: "01", job: "运维leader" },
        { id: "07", name: "小丽", pid: "02", job: "产品经理" },
        { id: "08", name: "大光", pid: "02", job: "产品经理" },
        { id: "09", name: "小高", pid: "03", job: "UI设计师" },
        { id: "10", name: "小刘", pid: "04", job: "前端工程师" },
        { id: "11", name: "小华", pid: "04", job: "后端工程师" },
        { id: "12", name: "小李", pid: "04", job: "后端工程师" },
        { id: "13", name: "小赵", pid: "05", job: "测试工程师" },
        { id: "14", name: "小强", pid: "05", job: "测试工程师" },
        { id: "15", name: "小涛", pid: "06", job: "运维工程师" },
        { id: "16", name: "小z", pid: "01", job: "工程师" },
      ];
      function toTree(faltData, parentId) {
        let resData = [];
        for (var i = 0; i < faltData.length; i++) {
          const item = faltData[i];
          if (item.pid !== parentId) {
            continue;
          }
          item.children = toTree(faltData, item.id);
          // if (!item.children.length) {
          //   delete item.children;
          // }
          resData.push(item);
        }
        return resData;
      }
      const toTreeData = toTree(faltData, "");
      console.log("toTreeData: ", toTreeData);
    </script>
  </body>
</html>
