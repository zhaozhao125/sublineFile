<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" oninput="myFunction" id="input" />
    <script>
      // let aa = setTimeout(() => {}, 100);
      // console.log("aa: ", aa);
      // clearTimeout(aa);
      // aa = null;
      // console.log("aa111: ", aa);
      function debounce(fn, delay) {
        let timer = null;
        return function () {
          if (timer) {
            clearTimeout(timer);
            // timer = null;
          }

          timer = setTimeout(fn, delay);
        };
      }

      const myFunction = debounce(() => {
        const input = document.getElementById("input");
        console.log(input.value);
      }, 1000);

      // 方式一、闭包形式

      // function debouce (fn, time) {
      //        let timer
      //        return function () {
      //        	if(timer) {
      //        		clearTimeout(timer)
      //        	}

      //        	timer = setTimeout(fn, time)

      //        }
      // }
      // myFunction = debouce(()=> {console.log('debounce')}, 1000)

      // 方式二、普通形式
      // var timer;
      // function myFunction () {
      // 	clearTimeout(timer)
      // 	timer = setTimeout(() => {
      //            console.log('debounce')
      // 	}, 1000)
      // }
      //       var count = 0;
      // function myFunction() {

      //   console.log(++count);
      //   clearTimeout(timer);
      //   timer = setTimeout(function() {
      //     console.log("发请求到后台,检查用户是否已注册");
      //   }, 1000);
      // }
      //          var timer;
      // function myFunction () {
      // 	clearTimeout(timer)
      // 	timer = setTimeout(function() {
      // 	    console.log("发请求到后台,检查用户是否已注册");
      // 	}, 1000);
      // }
      // if(timer) {
      // 	return
      // }
      // var timer
      // if(timer) {
      // 	clearTimeout(timer)
      // 	timer = setTimeout(() => {
      // 	   console.log(11111)
      //   }, 1000)
      // } else {
      //                 timer = setTimeout(() => {
      // 	   console.log(11111)

      //   }, 1000)
      // }

      // function debounce(fn,delay){
      //     let timer = null //借助闭包
      //     return function() {
      //         if(timer){
      //             clearTimeout(timer)
      //         }
      //         timer = setTimeout(fn,delay) // 简化写法
      //     }
      // }
      // // 然后是旧代码
      // function showTop  () {
      //     var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
      // 　　console.log('滚动条位置：' + scrollTop);
      // }
      // window.onscroll = debounce(showTop,1000) // 为了方便观察效果我们取个大点的间断值，实际使用根据需要来配置

      function throttle(fn, delay) {
        let last = 0; // 上次触发时间
        return function (...args) {
          const now = Date.now();
          if (now - last > delay) {
            last = now;
            fn.apply(this, args);
          }
        };
      } // 测试functiontask() {  console.log('run task')

      const throttleTask = throttle(() => {
        const input = document.getElementById("input");
        console.log(input.value);
      }, 1000);
      // window.addEventListener("scroll", throttleTask);
    </script>
  </body>
</html>
