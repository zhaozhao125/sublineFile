<!DOCTYPE html>
<html lang="en">
<div>
  <input type="text" id="input" onInput="myFunction()">
</div>
<script>
  // 节流
  // function throttle(fn, delay) {
  //   let pretime = Date.now();
  //   let timer = null;
  //   return function () {
  //     let currentTime = Date.now();
  //     const durTime = currentTime - pretime - delay;
  //     clearTimeout(timer);
  //     if (durTime >= 0) {
  //       // 执行了
  //       fn();
  //       pretime = currentTime;
  //     } else {
  //       timer = setTimeout(() => {
  //         fn();
  //       }, delay);
  //     }
  //   };
  // }

  // 防抖： debounce
  function debounce(fn, delay) {
    let timer = null;
    return function (...args) {
      const context = this
        clearTimeout(timer)
        timer = setTimeout(() => {
          console.log('执行')
          fn.apply(context)
        }, delay)
      
    }
  }

  function throttle(fn, delay) {
    let preTime = 0
    let timer = null
    return function() {
      const nowTime = Date.now()
      clearTimeout(timer)

      if (nowTime - preTime >= delay) {
         fn()
         preTime = nowTime
      } else {
        timer = setTimeout(() => {
          fn()
        }, delay)
      }
    }
  }
  
  const inputDom = document.querySelector('#input');
  const myFunction = throttle((...res) => {
    console.log(inputDom.value)
  }, 1000)

</script>
</body>

</html>
